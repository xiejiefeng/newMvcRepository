$(function(){App.init();var c={data:{simpleData:{enable:true}},callback:{onClick:b}};var e;$treeInfo=$("#treeInfo"),$path=$treeInfo.find(".form-control-static:eq(0)"),$name=$treeInfo.find("input:eq(0)"),$no=$treeInfo.find("input:eq(1)"),$order=$treeInfo.find("input:eq(2)"),$saveBtn=$treeInfo.find("button:eq(0)"),$delBtn=$treeInfo.find("button:eq(1)"),$addBtn=$treeInfo.find("button:eq(2)");function a(g){var h=g.name;while(g.getParentNode()){h=g.getParentNode().name+' <span class="text-lightgrey">>></span> '+h;g=g.getParentNode()}return h}function b(g,i,h){console.log(h);$treeInfo.show();e=h;$path.html(a(h));$name.val(h.name);$no.val(h.id);h.level==0?$saveBtn.addClass("disabled").prop("disabled",true):$saveBtn.removeClass("disabled").removeProp("disabled");$delBtn.removeClass("disabled").removeProp("disabled");$addBtn.removeClass("disabled").removeProp("disabled")}var f=[{id:0,pId:null,name:"服务分类",open:true},{id:1,pId:0,name:"服务"},{id:11,pId:1,name:"保养"},{id:111,pId:11,name:"换油"},{id:1111,pId:111,name:"矿物保养油"},{id:1112,pId:111,name:"半合成机油保养"},{id:1113,pId:111,name:"全合成机油保养"},{id:112,pId:11,name:"其他易损件更换"},{id:1121,pId:112,name:"更换空滤"},{id:1122,pId:112,name:"更换燃油滤"},{id:113,pId:11,name:"更换空调滤"},{id:1131,pId:113,name:"灯泡"},{id:1131,pId:113,name:"雨刮"},{id:1131,pId:113,name:"更换电瓶"}];$.fn.zTree.init($("#treeDemo"),c,f);var d=$.fn.zTree.getZTreeObj("treeDemo");$saveBtn.on("click",function(){var g;$delBtn.prop("disabled")?(g="数据已添加！"):(g="数据已更新！");console.log(g);$.Alert(g,"",function(){$treeInfo.hide();d.reAsyncChildNodes(null,"refresh")})});$delBtn.on("click",function(){e.isParent?$.Alert("当前商品分类还包含子商品分类，请先删除对应的子结点！"):$.Confirm("您确定要删除这条信息？")});$addBtn.on("click",function(){$delBtn.prop("disabled",true).addClass("disabled");$addBtn.prop("disabled",true).addClass("disabled")})});