(function(f){var d={errors:[],minChar:8,errorMessages:{password_to_short:"The Password is too short",same_as_username:"Your password cannot be the same as your username"},scores:[17,26,40,50],verdicts:["Weak","Normal","Medium","Strong","Very Strong"],showVerdictInline:true,showVerdicts:true,raisePower:1.4,usernameField:"#username",onLoad:undefined,onKeyUp:undefined,viewports:{progress:undefined,verdict:undefined,errors:undefined},ruleScores:{wordNotEmail:-100,wordLength:-100,wordSimilarToUsername:-100,wordLowercase:1,wordUppercase:3,wordOneNumber:3,wordThreeNumbers:5,wordOneSpecialChar:3,wordTwoSpecialChar:5,wordUpperLowerCombo:2,wordLetterNumberCombo:2,wordLetterNumberCharCombo:2},rules:{wordNotEmail:true,wordLength:true,wordSimilarToUsername:true,wordLowercase:true,wordUppercase:true,wordOneNumber:true,wordThreeNumbers:true,wordOneSpecialChar:true,wordTwoSpecialChar:true,wordUpperLowerCombo:true,wordLetterNumberCombo:true,wordLetterNumberCharCombo:true},validationRules:{wordNotEmail:function(g,h,i){return h.match(/^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z])\.)+[a-z]{2,6})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i)&&i},wordLength:function(g,j,k){var h=j.length,i=Math.pow(h,g.raisePower);if(h<g.minChar){i=(i+k);g.errors.push(g.errorMessages.password_to_short)}return i},wordSimilarToUsername:function(g,h,i){var j=f(g.usernameField).val();if(j&&h.toLowerCase().match(j.toLowerCase())){g.errors.push(g.errorMessages.same_as_username);return i}return true},wordLowercase:function(g,h,i){return h.match(/[a-z]/)&&i},wordUppercase:function(g,h,i){return h.match(/[A-Z]/)&&i},wordOneNumber:function(g,h,i){return h.match(/\d+/)&&i},wordThreeNumbers:function(g,h,i){return h.match(/(.*[0-9].*[0-9].*[0-9])/)&&i},wordOneSpecialChar:function(g,h,i){return h.match(/.[!,@,#,$,%,\^,&,*,?,_,~]/)&&i},wordTwoSpecialChar:function(g,h,i){return h.match(/(.*[!,@,#,$,%,\^,&,*,?,_,~].*[!,@,#,$,%,\^,&,*,?,_,~])/)&&i},wordUpperLowerCombo:function(g,h,i){return h.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)&&i},wordLetterNumberCombo:function(g,h,i){return h.match(/([a-zA-Z])/)&&h.match(/([0-9])/)&&i},wordLetterNumberCharCombo:function(g,h,i){return h.match(/([a-zA-Z0-9].*[!,@,#,$,%,\^,&,*,?,_,~])|([!,@,#,$,%,\^,&,*,?,_,~].*[a-zA-Z0-9])/)&&i}}},e=function(j,k){var i=j.data("pwstrength"),g=i.progressbar,h;if(i.showVerdictInline){h=g.find(".progress-bar")}else{if(i.showVerdicts){if(i.viewports.verdict){h=f(i.viewports.verdict).find(".progress-bar")}else{h=j.parent().find(".password-verdict");if(h.length===0){h=f('<span class="password-verdict"></span>');h.insertAfter(j)}}}}if(k<i.scores[0]){g.find(".progress-bar").css("width","5%").addClass("progress-bar-danger").removeClass("progress-bar-warning").removeClass("progress-bar-success");if(i.showVerdicts){h.text(i.verdicts[0])}}else{if(k>=i.scores[0]&&k<i.scores[1]){g.find(".progress-bar").css("width","25%").addClass("progress-bar-danger").removeClass("progress-bar-warning").removeClass("progress-bar-success");if(i.showVerdicts){h.text(i.verdicts[1])}}else{if(k>=i.scores[1]&&k<i.scores[2]){g.find(".progress-bar").css("width","50%").addClass("progress-bar-warning").removeClass("progress-bar-danger").removeClass("progress-bar-success");if(i.showVerdicts){h.text(i.verdicts[2])}}else{if(k>=i.scores[2]&&k<i.scores[3]){g.find(".progress-bar").css("width","75%").addClass("progress-bar-warning").removeClass("progress-bar-danger").removeClass("progress-bar-success");if(i.showVerdicts){h.text(i.verdicts[3])}}else{if(k>=i.scores[3]){g.find(".progress-bar").css("width","100%").addClass("progress-bar-success").removeClass("progress-bar-warning").removeClass("progress-bar-danger");g.find(".bar").css("width","100%");if(i.showVerdicts){h.text(i.verdicts[4])}}}}}}},c=function(j){var g=this,k=j.val(),i=0,h=j.data("pwstrength");f.each(h.rules,function(n,m){if(m===true){var o=h.ruleScores[n],l=h.validationRules[n](h,k,o);if(l){i+=l}}});e(j,i);return i},a=function(){return'<div class="progress"><div class="progress-bar"></div></div>'},b={init:function(h){var g=this,i=f.extend(d,h);return this.each(function(j,n){var l=f(n),k,m;l.data("pwstrength",i);l.on("keyup",function(p){var o=l.data("pwstrength");o.errors=[];c.call(g,l);if(f.isFunction(o.onKeyUp)){o.onKeyUp(p)}});k=f(a());if(i.viewports.progress){f(i.viewports.progress).append(k)}else{k.insertAfter(l)}k.find(".progress-bar").css("width","0%");l.data("pwstrength").progressbar=k;if(!d.showVerdictInline&&i.showVerdicts){m=f('<span class="password-verdict">'+i.verdicts[0]+"</span>");if(i.viewports.verdict){f(i.viewports.verdict).append(m)}else{m.insertAfter(l)}}if(f.isFunction(i.onLoad)){i.onLoad()}})},destroy:function(){this.each(function(g,i){var h=f(i);h.parent().find("span.password-verdict").remove();h.parent().find("div.progress").remove();h.parent().find("ul.error-list").remove();h.removeData("pwstrength")})},forceUpdate:function(){var g=this;this.each(function(h,k){var j=f(k),i=j.data("pwstrength");i.errors=[];c.call(g,j)})},outputErrorList:function(){this.each(function(g,l){var h='<ul class="error-list">',j=f(l),m=j.data("pwstrength").errors,i=j.data("pwstrength").viewports,k;j.parent().find("ul.error-list").remove();if(m.length>0){f.each(m,function(n,o){h+="<li>"+o+"</li>"});h+="</ul>";if(i.errors){f(i.errors).html(h)}else{h=f(h);k=j.parent().find("span.password-verdict");if(k.length>0){l=k}h.insertAfter(l)}}})},addRule:function(g,j,i,h){this.each(function(k,m){var l=f(m).data("pwstrength");l.rules[g]=h;l.ruleScores[g]=i;l.validationRules[g]=j})},changeScore:function(g,h){this.each(function(i,j){f(j).data("pwstrength").ruleScores[g]=h})},ruleActive:function(h,g){this.each(function(i,j){f(j).data("pwstrength").rules[h]=g})}};f.fn.pwstrength=function(h){var g;if(b[h]){g=b[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){g=b.init.apply(this,arguments)}else{f.error("Method "+h+" does not exist on jQuery.pwstrength")}}return g}}(jQuery));