(function(f){function b(){this.regional=[];this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:false,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:false,onExpiry:null,onTick:null,tickInterval:1};f.extend(this._defaults,this.regional[""]);this._serverSyncs=[];function n(p){var q=(p<1000000000000?(q=performance.now?(performance.now()+performance.timing.navigationStart):Date.now()):p||new Date().getTime());if(q-m>=1000){g._updateTargets();m=q}o(n)}var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null;var m=0;if(!o||f.noRequestAnimationFrame){f.noRequestAnimationFrame=null;setInterval(function(){g._updateTargets()},980)}else{m=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||new Date().getTime();o(n)}}var c=0;var h=1;var d=2;var a=3;var l=4;var i=5;var e=6;f.extend(b.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(m){this._resetExtraLabels(this._defaults,m);f.extend(this._defaults,m||{})},UTCDate:function(o,s,q,t,u,n,p,m){if(typeof s=="object"&&s.constructor==Date){m=s.getMilliseconds();p=s.getSeconds();n=s.getMinutes();u=s.getHours();t=s.getDate();q=s.getMonth();s=s.getFullYear()}var r=new Date();r.setUTCFullYear(s);r.setUTCDate(1);r.setUTCMonth(q||0);r.setUTCDate(t||1);r.setUTCHours(u||0);r.setUTCMinutes((n||0)-(Math.abs(o)<30?o*60:o));r.setUTCSeconds(p||0);r.setUTCMilliseconds(m||0);return r},periodsToSeconds:function(m){return m[0]*31557600+m[1]*2629800+m[2]*604800+m[3]*86400+m[4]*3600+m[5]*60+m[6]},_attachPlugin:function(o,m){o=f(o);if(o.hasClass(this.markerClassName)){return}var n={options:f.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};o.addClass(this.markerClassName).data(this.propertyName,n);this._optionPlugin(o,m)},_addTarget:function(m){if(!this._hasTarget(m)){this._timerTargets.push(m)}},_hasTarget:function(m){return(f.inArray(m,this._timerTargets)>-1)},_removeTarget:function(m){this._timerTargets=f.map(this._timerTargets,function(n){return(n==m?null:n)})},_updateTargets:function(){for(var m=this._timerTargets.length-1;m>=0;m--){this._updateCountdown(this._timerTargets[m])}},_optionPlugin:function(s,o,r){s=f(s);var q=s.data(this.propertyName);if(!o||(typeof o=="string"&&r==null)){var n=o;o=(q||{}).options;return(o&&n?o[n]:o)}if(!s.hasClass(this.markerClassName)){return}o=o||{};if(typeof o=="string"){var n=o;o={};o[n]=r}this._resetExtraLabels(q.options,o);var p=(q.options.timezone!=o.timezone);f.extend(q.options,o);this._adjustSettings(s,q,o.until!=null||o.since!=null||p);var m=new Date();if((q._since&&q._since<m)||(q._until&&q._until>m)){this._addTarget(s[0])}this._updateCountdown(s,q)},_updateCountdown:function(r,q){var m=f(r);q=q||m.data(this.propertyName);if(!q){return}m.html(this._generateHTML(q)).toggleClass(this._rtlClass,q.options.isRTL);if(f.isFunction(q.options.onTick)){var p=q._hold!="lap"?q._periods:this._calculatePeriods(q,q._show,q.options.significant,new Date());if(q.options.tickInterval==1||this.periodsToSeconds(p)%q.options.tickInterval==0){q.options.onTick.apply(r,[p])}}var n=q._hold!="pause"&&(q._since?q._now.getTime()<q._since.getTime():q._now.getTime()>=q._until.getTime());if(n&&!q._expiring){q._expiring=true;if(this._hasTarget(r)||q.options.alwaysExpire){this._removeTarget(r);if(f.isFunction(q.options.onExpiry)){q.options.onExpiry.apply(r,[])}if(q.options.expiryText){var o=q.options.layout;q.options.layout=q.options.expiryText;this._updateCountdown(r,q);q.options.layout=o}if(q.options.expiryUrl){window.location=q.options.expiryUrl}}q._expiring=false}else{if(q._hold=="pause"){this._removeTarget(r)}}m.data(this.propertyName,q)},_resetExtraLabels:function(p,m){var o=false;for(var q in m){if(q!="whichLabels"&&q.match(/[Ll]abels/)){o=true;break}}if(o){for(var q in p){if(q.match(/[Ll]abels[02-9]|compactLabels1/)){p[q]=null}}}},_adjustSettings:function(t,q,s){var n;var p=0;var u=null;for(var o=0;o<this._serverSyncs.length;o++){if(this._serverSyncs[o][0]==q.options.serverSync){u=this._serverSyncs[o][1];break}}if(u!=null){p=(q.options.serverSync?u:0);n=new Date()}else{var m=(f.isFunction(q.options.serverSync)?q.options.serverSync.apply(t,[]):null);n=new Date();p=(m?n.getTime()-m.getTime():0);this._serverSyncs.push([q.options.serverSync,p])}var r=q.options.timezone;r=(r==null?-n.getTimezoneOffset():r);if(s||(!s&&q._until==null&&q._since==null)){q._since=q.options.since;if(q._since!=null){q._since=this.UTCDate(r,this._determineTime(q._since,null));if(q._since&&p){q._since.setMilliseconds(q._since.getMilliseconds()+p)}}q._until=this.UTCDate(r,this._determineTime(q.options.until,n));if(p){q._until.setMilliseconds(q._until.getMilliseconds()+p)}}q._show=this._determineShow(q)},_destroyPlugin:function(m){m=f(m);if(!m.hasClass(this.markerClassName)){return}this._removeTarget(m[0]);m.removeClass(this.markerClassName).empty().removeData(this.propertyName)},_pausePlugin:function(m){this._hold(m,"pause")},_lapPlugin:function(m){this._hold(m,"lap")},_resumePlugin:function(m){this._hold(m,null)},_hold:function(p,o){var n=f.data(p,this.propertyName);if(n){if(n._hold=="pause"&&!o){n._periods=n._savePeriods;var m=(n._since?"-":"+");n[n._since?"_since":"_until"]=this._determineTime(m+n._periods[0]+"y"+m+n._periods[1]+"o"+m+n._periods[2]+"w"+m+n._periods[3]+"d"+m+n._periods[4]+"h"+m+n._periods[5]+"m"+m+n._periods[6]+"s");this._addTarget(p)}n._hold=o;n._savePeriods=(o=="pause"?n._periods:null);f.data(p,this.propertyName,n);this._updateCountdown(p,n)}},_getTimesPlugin:function(n){var m=f.data(n,this.propertyName);return(!m?null:(m._hold=="pause"?m._savePeriods:(!m._hold?m._periods:this._calculatePeriods(m,m._show,m.options.significant,new Date()))))},_determineTime:function(p,m){var o=function(s){var r=new Date();r.setTime(r.getTime()+s*1000);return r};var n=function(v){v=v.toLowerCase();var s=new Date();var z=s.getFullYear();var x=s.getMonth();var A=s.getDate();var u=s.getHours();var t=s.getMinutes();var r=s.getSeconds();var y=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g;var w=y.exec(v);while(w){switch(w[2]||"s"){case"s":r+=parseInt(w[1],10);break;case"m":t+=parseInt(w[1],10);break;case"h":u+=parseInt(w[1],10);break;case"d":A+=parseInt(w[1],10);break;case"w":A+=parseInt(w[1],10)*7;break;case"o":x+=parseInt(w[1],10);A=Math.min(A,g._getDaysInMonth(z,x));break;case"y":z+=parseInt(w[1],10);A=Math.min(A,g._getDaysInMonth(z,x));break}w=y.exec(v)}return new Date(z,x,A,u,t,r,0)};var q=(p==null?m:(typeof p=="string"?n(p):(typeof p=="number"?o(p):p)));if(q){q.setMilliseconds(0)}return q},_getDaysInMonth:function(m,n){return 32-new Date(m,n,32).getDate()},_normalLabels:function(m){return m},_generateHTML:function(q){var x=this;q._periods=(q._hold?q._periods:this._calculatePeriods(q,q._show,q.options.significant,new Date()));var u=false;var n=0;var p=q.options.significant;var w=f.extend({},q._show);for(var t=c;t<=e;t++){u|=(q._show[t]=="?"&&q._periods[t]>0);w[t]=(q._show[t]=="?"&&!u?null:q._show[t]);n+=(w[t]?1:0);p-=(q._periods[t]>0?1:0)}var v=[false,false,false,false,false,false,false];for(var t=e;t>=c;t--){if(q._show[t]){if(q._periods[t]){v[t]=true}else{v[t]=p>0;p--}}}var r=(q.options.compact?q.options.compactLabels:q.options.labels);var m=q.options.whichLabels||this._normalLabels;var s=function(z){var y=q.options["compactLabels"+m(q._periods[z])];return(w[z]?x._translateDigits(q,q._periods[z])+(y?y[z]:r[z])+" ":"")};var o=function(z){var y=q.options["labels"+m(q._periods[z])];return((!q.options.significant&&w[z])||(q.options.significant&&v[z])?'<span class="'+g._sectionClass+'"><span class="'+g._amountClass+'">'+x._translateDigits(q,q._periods[z])+"</span><br/>"+(y?y[z]:r[z])+"</span>":"")};return(q.options.layout?this._buildLayout(q,w,q.options.layout,q.options.compact,q.options.significant,v):((q.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(q._hold?" "+this._holdingClass:"")+'">'+s(c)+s(h)+s(d)+s(a)+(w[l]?this._minDigits(q,q._periods[l],2):"")+(w[i]?(w[l]?q.options.timeSeparator:"")+this._minDigits(q,q._periods[i],2):"")+(w[e]?(w[l]||w[i]?q.options.timeSeparator:"")+this._minDigits(q,q._periods[e],2):""):'<span class="'+this._rowClass+" "+this._showClass+(q.options.significant||n)+(q._hold?" "+this._holdingClass:"")+'">'+o(c)+o(h)+o(d)+o(a)+o(l)+o(i)+o(e))+"</span>"+(q.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+q.options.description+"</span>":"")))},_buildLayout:function(r,y,t,v,z,x){var s=r.options[v?"compactLabels":"labels"];var n=r.options.whichLabels||this._normalLabels;var m=function(B){return(r.options[(v?"compactLabels":"labels")+n(r._periods[B])]||s)[B]};var w=function(C,B){return r.options.digits[Math.floor(C/B)%10]};var o={desc:r.options.description,sep:r.options.timeSeparator,yl:m(c),yn:this._minDigits(r,r._periods[c],1),ynn:this._minDigits(r,r._periods[c],2),ynnn:this._minDigits(r,r._periods[c],3),y1:w(r._periods[c],1),y10:w(r._periods[c],10),y100:w(r._periods[c],100),y1000:w(r._periods[c],1000),ol:m(h),on:this._minDigits(r,r._periods[h],1),onn:this._minDigits(r,r._periods[h],2),onnn:this._minDigits(r,r._periods[h],3),o1:w(r._periods[h],1),o10:w(r._periods[h],10),o100:w(r._periods[h],100),o1000:w(r._periods[h],1000),wl:m(d),wn:this._minDigits(r,r._periods[d],1),wnn:this._minDigits(r,r._periods[d],2),wnnn:this._minDigits(r,r._periods[d],3),w1:w(r._periods[d],1),w10:w(r._periods[d],10),w100:w(r._periods[d],100),w1000:w(r._periods[d],1000),dl:m(a),dn:this._minDigits(r,r._periods[a],1),dnn:this._minDigits(r,r._periods[a],2),dnnn:this._minDigits(r,r._periods[a],3),d1:w(r._periods[a],1),d10:w(r._periods[a],10),d100:w(r._periods[a],100),d1000:w(r._periods[a],1000),hl:m(l),hn:this._minDigits(r,r._periods[l],1),hnn:this._minDigits(r,r._periods[l],2),hnnn:this._minDigits(r,r._periods[l],3),h1:w(r._periods[l],1),h10:w(r._periods[l],10),h100:w(r._periods[l],100),h1000:w(r._periods[l],1000),ml:m(i),mn:this._minDigits(r,r._periods[i],1),mnn:this._minDigits(r,r._periods[i],2),mnnn:this._minDigits(r,r._periods[i],3),m1:w(r._periods[i],1),m10:w(r._periods[i],10),m100:w(r._periods[i],100),m1000:w(r._periods[i],1000),sl:m(e),sn:this._minDigits(r,r._periods[e],1),snn:this._minDigits(r,r._periods[e],2),snnn:this._minDigits(r,r._periods[e],3),s1:w(r._periods[e],1),s10:w(r._periods[e],10),s100:w(r._periods[e],100),s1000:w(r._periods[e],1000)};var q=t;for(var p=c;p<=e;p++){var u="yowdhms".charAt(p);var A=new RegExp("\\{"+u+"<\\}(.*)\\{"+u+">\\}","g");q=q.replace(A,((!z&&y[p])||(z&&x[p])?"$1":""))}f.each(o,function(D,B){var C=new RegExp("\\{"+D+"\\}","g");q=q.replace(C,B)});return q},_minDigits:function(o,n,m){n=""+n;if(n.length>=m){return this._translateDigits(o,n)}n="0000000000"+n;return this._translateDigits(o,n.substr(n.length-m))},_translateDigits:function(n,m){return(""+m).replace(/[0-9]/g,function(o){return n.options.digits[o]})},_determineShow:function(n){var o=n.options.format;var m=[];m[c]=(o.match("y")?"?":(o.match("Y")?"!":null));m[h]=(o.match("o")?"?":(o.match("O")?"!":null));m[d]=(o.match("w")?"?":(o.match("W")?"!":null));m[a]=(o.match("d")?"?":(o.match("D")?"!":null));m[l]=(o.match("h")?"?":(o.match("H")?"!":null));m[i]=(o.match("m")?"?":(o.match("M")?"!":null));m[e]=(o.match("s")?"?":(o.match("S")?"!":null));return m},_calculatePeriods:function(p,D,t,n){p._now=n;p._now.setMilliseconds(0);var r=new Date(p._now.getTime());if(p._since){if(n.getTime()<p._since.getTime()){p._now=n=r}else{n=p._since}}else{r.setTime(p._until.getTime());if(n.getTime()>p._until.getTime()){p._now=n=r}}var m=[0,0,0,0,0,0,0];if(D[c]||D[h]){var y=g._getDaysInMonth(n.getFullYear(),n.getMonth());var z=g._getDaysInMonth(r.getFullYear(),r.getMonth());var s=(r.getDate()==n.getDate()||(r.getDate()>=Math.min(y,z)&&n.getDate()>=Math.min(y,z)));var C=function(F){return(F.getHours()*60+F.getMinutes())*60+F.getSeconds()};var u=Math.max(0,(r.getFullYear()-n.getFullYear())*12+r.getMonth()-n.getMonth()+((r.getDate()<n.getDate()&&!s)||(s&&C(r)<C(n))?-1:0));m[c]=(D[c]?Math.floor(u/12):0);m[h]=(D[h]?u-m[c]*12:0);n=new Date(n.getTime());var E=(n.getDate()==y);var q=g._getDaysInMonth(n.getFullYear()+m[c],n.getMonth()+m[h]);if(n.getDate()>q){n.setDate(q)}n.setFullYear(n.getFullYear()+m[c]);n.setMonth(n.getMonth()+m[h]);if(E){n.setDate(q)}}var x=Math.floor((r.getTime()-n.getTime())/1000);var o=function(G,F){m[G]=(D[G]?Math.floor(x/F):0);x-=m[G]*F};o(d,604800);o(a,86400);o(l,3600);o(i,60);o(e,1);if(x>0&&!p._since){var v=[1,12,4.3482,7,24,60,60];var w=e;var A=1;for(var B=e;B>=c;B--){if(D[B]){if(m[w]>=A){m[w]=0;x=1}if(x>0){m[B]++;x=0;w=B;A=1}}A*=v[B]}}if(t){for(var B=c;B<=e;B++){if(t&&m[B]){t--}else{if(!t){m[B]=0}}}}return m}});var j=["getTimes"];function k(n,m){if(n=="option"&&(m.length==0||(m.length==1&&typeof m[0]=="string"))){return true}return f.inArray(n,j)>-1}f.fn.countdown=function(n){var m=Array.prototype.slice.call(arguments,1);if(k(n,m)){return g["_"+n+"Plugin"].apply(g,[this[0]].concat(m))}return this.each(function(){if(typeof n=="string"){if(!g["_"+n+"Plugin"]){throw"Unknown command: "+n}g["_"+n+"Plugin"].apply(g,[this].concat(m))}else{g._attachPlugin(this,n||{})}})};var g=f.countdown=new b()})(jQuery);